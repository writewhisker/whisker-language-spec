{
  "summary": {
    "semanticValidation": 23,
    "apiExecution": 24,
    "choiceSyntax": 14,
    "formatHandling": 4,
    "parserBugs": 4,
    "testIssues": 3
  },
  "categories": {
    "semanticValidation": [
      {
        "name": "syntax-passage-invalid-number-start",
        "category": "syntax",
        "expected": {
          "error": "Invalid passage name",
          "valid": false
        },
        "coreActual": {
          "passages": 1,
          "valid": true
        },
        "webActual": {
          "passages": 1,
          "valid": false,
          "error": "Expected passage name after ::"
        },
        "platform": "both"
      },
      {
        "name": "syntax-passage-invalid-space",
        "category": "syntax",
        "expected": {
          "error": "Invalid passage name",
          "valid": false
        },
        "coreActual": {
          "passages": 1,
          "valid": true
        },
        "webActual": {
          "passages": 1,
          "valid": true,
          "error": null
        },
        "platform": "both"
      },
      {
        "name": "syntax-passage-invalid-hyphen",
        "category": "syntax",
        "expected": {
          "error": "Invalid passage name",
          "valid": false
        },
        "coreActual": {
          "passages": 1,
          "valid": true
        },
        "webActual": {
          "passages": 1,
          "valid": true,
          "error": null
        },
        "platform": "both"
      },
      {
        "name": "syntax-passage-duplicate",
        "category": "syntax",
        "expected": {
          "error": "Duplicate passage",
          "valid": false
        },
        "coreActual": {
          "passages": 1,
          "valid": true
        },
        "webActual": {
          "passages": 2,
          "valid": true,
          "error": null
        },
        "platform": "both"
      },
      {
        "name": "var-declare-invalid-name",
        "category": "variables",
        "expected": {
          "error": "Invalid variable name",
          "valid": false
        },
        "coreActual": {
          "passages": 1,
          "valid": true
        },
        "webActual": {
          "passages": 1,
          "valid": false,
          "error": "Expected variable name after \"$\""
        },
        "platform": "both"
      },
      {
        "name": "var-declare-reserved-prefix",
        "category": "variables",
        "expected": {
          "error": "Reserved prefix",
          "valid": false
        },
        "coreActual": {
          "passages": 1,
          "valid": true
        },
        "webActual": {
          "passages": 1,
          "valid": true,
          "error": null
        },
        "platform": "both"
      },
      {
        "name": "var-undefined-access",
        "category": "variables",
        "expected": {
          "error": "Undefined variable",
          "valid": false
        },
        "coreActual": {
          "passages": 1,
          "valid": true
        },
        "webActual": {
          "passages": 1,
          "valid": true,
          "error": null
        },
        "platform": "both"
      },
      {
        "name": "var-declare-order",
        "category": "variables",
        "expected": {
          "error": "Undefined variable",
          "valid": false
        },
        "coreActual": {
          "passages": 1,
          "valid": true
        },
        "webActual": {
          "passages": 1,
          "valid": true,
          "error": null
        },
        "platform": "both"
      },
      {
        "name": "var-type-mismatch-add",
        "category": "variables",
        "expected": {
          "error": "Type mismatch",
          "valid": false
        },
        "coreActual": {
          "passages": 1,
          "valid": true
        },
        "webActual": {
          "passages": 1,
          "valid": true,
          "error": null
        },
        "platform": "both"
      },
      {
        "name": "var-scope-temp-cleared",
        "category": "variables",
        "expected": {
          "error": "Undefined variable",
          "valid": false
        },
        "coreActual": {
          "passages": 2,
          "valid": true
        },
        "webActual": {
          "passages": 2,
          "valid": true,
          "error": null
        },
        "platform": "both"
      },
      {
        "name": "var-scope-shadow-invalid",
        "category": "variables",
        "expected": {
          "error": "Shadows story variable",
          "valid": false
        },
        "coreActual": {
          "passages": 1,
          "valid": true
        },
        "webActual": {
          "passages": 1,
          "valid": true,
          "error": null
        },
        "platform": "both"
      },
      {
        "name": "cond-block-unclosed",
        "category": "conditionals",
        "expected": {
          "error": "Unclosed conditional",
          "valid": false
        },
        "coreActual": {
          "passages": 1,
          "valid": true
        },
        "webActual": {
          "passages": 1,
          "valid": true,
          "error": null
        },
        "platform": "both"
      },
      {
        "name": "cond-block-orphan-close",
        "category": "conditionals",
        "expected": {
          "error": "Unexpected close",
          "valid": false
        },
        "coreActual": {
          "passages": 1,
          "valid": true
        },
        "webActual": {
          "passages": 1,
          "valid": true,
          "error": null
        },
        "platform": "both"
      },
      {
        "name": "cond-inline-nested-invalid",
        "category": "conditionals",
        "expected": {
          "error": "Nested inline conditional",
          "valid": false
        },
        "coreActual": {
          "passages": 1,
          "valid": true
        },
        "webActual": {
          "passages": 1,
          "valid": true,
          "error": null
        },
        "platform": "both"
      },
      {
        "name": "cond-inline-missing-false",
        "category": "conditionals",
        "expected": {
          "error": "Missing false option",
          "valid": false
        },
        "coreActual": {
          "passages": 1,
          "valid": true
        },
        "webActual": {
          "passages": 1,
          "valid": true,
          "error": null
        },
        "platform": "both"
      },
      {
        "name": "choice-invalid-target",
        "category": "choices",
        "expected": {
          "error": "Target passage does not exist",
          "valid": false
        },
        "coreActual": {
          "passages": 1,
          "valid": true
        },
        "webActual": {
          "passages": 1,
          "valid": true,
          "error": null
        },
        "platform": "both"
      },
      {
        "name": "choice-condition-invalid",
        "category": "choices",
        "expected": {
          "error": "Invalid condition",
          "valid": false
        },
        "coreActual": {
          "passages": 1,
          "valid": true
        },
        "webActual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: }"
        },
        "platform": "both"
      },
      {
        "name": "format-text-empty-file",
        "category": "formats",
        "expected": {
          "error": "No passages",
          "valid": false
        },
        "coreActual": {
          "passages": 0,
          "valid": true
        },
        "webActual": {
          "passages": 0,
          "valid": true,
          "error": null
        },
        "platform": "both"
      },
      {
        "name": "format-json-missing-format",
        "category": "formats",
        "expected": {
          "error": "Missing required field: format",
          "valid": false
        },
        "coreActual": {
          "passages": 0,
          "valid": true
        },
        "webActual": {
          "valid": false,
          "error": "TypeError: Cannot read properties of undefined (reading 'length')"
        },
        "platform": "both"
      },
      {
        "name": "format-json-invalid-format",
        "category": "formats",
        "expected": {
          "error": "Invalid format",
          "valid": false
        },
        "coreActual": {
          "passages": 0,
          "valid": true
        },
        "webActual": {
          "valid": false,
          "error": "TypeError: Cannot read properties of undefined (reading 'length')"
        },
        "platform": "both"
      },
      {
        "name": "format-json-type-mismatch",
        "category": "formats",
        "expected": {
          "error": "Type mismatch",
          "valid": false
        },
        "coreActual": {
          "passages": 0,
          "valid": true
        },
        "webActual": {
          "valid": false,
          "error": "TypeError: Cannot read properties of undefined (reading 'length')"
        },
        "platform": "both"
      },
      {
        "name": "edge-division-by-zero",
        "category": "edge-cases",
        "expected": {
          "error": "Division by zero",
          "valid": false
        },
        "coreActual": {
          "passages": 1,
          "valid": true
        },
        "webActual": {
          "passages": 1,
          "valid": true,
          "error": null
        },
        "platform": "both"
      },
      {
        "name": "edge-modulo-zero",
        "category": "edge-cases",
        "expected": {
          "error": "Modulo by zero",
          "valid": false
        },
        "coreActual": {
          "passages": 1,
          "valid": true
        },
        "webActual": {
          "passages": 1,
          "valid": true,
          "error": null
        },
        "platform": "both"
      }
    ],
    "apiExecution": [
      {
        "name": "api-state-get",
        "category": "api",
        "expected": {
          "output": "Value: 100",
          "valid": true
        },
        "actual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: {"
        },
        "platform": "web"
      },
      {
        "name": "api-state-set",
        "category": "api",
        "expected": {
          "output": "Value: 200",
          "variables": {
            "gold": 200
          },
          "valid": true
        },
        "actual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: {"
        },
        "platform": "web"
      },
      {
        "name": "api-state-has-true",
        "category": "api",
        "expected": {
          "output": "Has gold: true",
          "valid": true
        },
        "actual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: {"
        },
        "platform": "web"
      },
      {
        "name": "api-state-has-false",
        "category": "api",
        "expected": {
          "output": "Has gold: false",
          "valid": true
        },
        "actual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: {"
        },
        "platform": "web"
      },
      {
        "name": "api-state-delete",
        "category": "api",
        "expected": {
          "output": "Has: false",
          "valid": true
        },
        "actual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: {"
        },
        "platform": "web"
      },
      {
        "name": "api-state-all",
        "category": "api",
        "expected": {
          "valid": true
        },
        "actual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: {"
        },
        "platform": "web"
      },
      {
        "name": "api-state-reset",
        "category": "api",
        "expected": {
          "output": "Has: false",
          "valid": true
        },
        "actual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: {"
        },
        "platform": "web"
      },
      {
        "name": "api-state-get-nil",
        "category": "api",
        "expected": {
          "output": "Value: nil",
          "valid": true
        },
        "actual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: {"
        },
        "platform": "web"
      },
      {
        "name": "api-passage-current",
        "category": "api",
        "expected": {
          "output": "Passage: Start",
          "valid": true
        },
        "actual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: {"
        },
        "platform": "web"
      },
      {
        "name": "api-passage-get",
        "category": "api",
        "expected": {
          "variables": {
            "found": true
          },
          "valid": true
        },
        "actual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: {"
        },
        "platform": "web"
      },
      {
        "name": "api-passage-exists",
        "category": "api",
        "expected": {
          "output": "Exists: true\nMissing: false",
          "valid": true
        },
        "actual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: {"
        },
        "platform": "web"
      },
      {
        "name": "api-passage-go",
        "category": "api",
        "expected": {
          "valid": true
        },
        "actual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: {"
        },
        "platform": "web"
      },
      {
        "name": "api-history-back",
        "category": "api",
        "expected": {
          "valid": true
        },
        "actual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: {"
        },
        "platform": "web"
      },
      {
        "name": "api-history-canBack",
        "category": "api",
        "expected": {
          "output": "Can go back: false",
          "valid": true
        },
        "actual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: {"
        },
        "platform": "web"
      },
      {
        "name": "api-history-count",
        "category": "api",
        "expected": {
          "output_next": "History: 1",
          "valid": true
        },
        "actual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: {"
        },
        "platform": "web"
      },
      {
        "name": "api-history-contains",
        "category": "api",
        "expected": {
          "output_next": "Was at Start: true",
          "valid": true
        },
        "actual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: {"
        },
        "platform": "web"
      },
      {
        "name": "api-visited-current",
        "category": "api",
        "expected": {
          "output_visit_1": "Visits: 1",
          "output_visit_2": "Visits: 2",
          "valid": true
        },
        "actual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: {"
        },
        "platform": "web"
      },
      {
        "name": "api-visited-other",
        "category": "api",
        "expected": {
          "output_other": "Start visits: 1",
          "valid": true
        },
        "actual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: {"
        },
        "platform": "web"
      },
      {
        "name": "api-random",
        "category": "api",
        "expected": {
          "valid": true
        },
        "actual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: {"
        },
        "platform": "web"
      },
      {
        "name": "api-pick",
        "category": "api",
        "expected": {
          "valid": true
        },
        "actual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: {"
        },
        "platform": "web"
      },
      {
        "name": "api-print",
        "category": "api",
        "expected": {
          "output": "Content.",
          "valid": true
        },
        "actual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: {"
        },
        "platform": "web"
      },
      {
        "name": "api-lua-inline",
        "category": "api",
        "expected": {
          "variables": {
            "x": 8
          },
          "valid": true
        },
        "actual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: {"
        },
        "platform": "web"
      },
      {
        "name": "api-lua-block",
        "category": "api",
        "expected": {
          "output": "Sum: 30",
          "valid": true
        },
        "actual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: {"
        },
        "platform": "web"
      },
      {
        "name": "api-lua-stdlib",
        "category": "api",
        "expected": {
          "output": "Upper: HELLO\nFloor: 3",
          "valid": true
        },
        "actual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: {"
        },
        "platform": "web"
      }
    ],
    "choiceSyntax": [
      {
        "name": "choice-condition-comparison",
        "category": "choices",
        "expected": {
          "choices": 1,
          "valid": true
        },
        "coreActual": {
          "passages": 1,
          "error": "Choice missing target",
          "valid": false
        },
        "webActual": {
          "passages": 1,
          "valid": false,
          "error": "Expected variable name after \"$\""
        },
        "platform": "both"
      },
      {
        "name": "choice-condition-sticky",
        "category": "choices",
        "expected": {
          "valid": true
        },
        "coreActual": {
          "passages": 1,
          "error": "Choice missing target",
          "valid": false
        },
        "webActual": {
          "passages": 1,
          "valid": false,
          "error": "Expected variable name after \"$\""
        },
        "platform": "both"
      },
      {
        "name": "choice-action-with-condition",
        "category": "choices",
        "expected": {
          "valid": true
        },
        "coreActual": {
          "passages": 1,
          "error": "Choice missing target",
          "valid": false
        },
        "webActual": {
          "passages": 1,
          "valid": false,
          "error": "Expected variable name after \"$\""
        },
        "platform": "both"
      },
      {
        "name": "choice-full-syntax",
        "category": "choices",
        "expected": {
          "valid": true
        },
        "coreActual": {
          "passages": 1,
          "error": "Choice missing target",
          "valid": false
        },
        "webActual": {
          "passages": 1,
          "valid": false,
          "error": "Expected variable name after \"$\""
        },
        "platform": "both"
      },
      {
        "name": "cond-inline-in-choice",
        "category": "conditionals",
        "expected": {
          "choice_text": "Unlock the door",
          "valid": true
        },
        "actual": {
          "passages": 1,
          "error": "Choice missing target",
          "valid": false
        },
        "platform": "core"
      },
      {
        "name": "choice-text-interpolation",
        "category": "choices",
        "expected": {
          "choice_text": "Take the sword",
          "valid": true
        },
        "actual": {
          "passages": 1,
          "error": "Choice missing target",
          "valid": false
        },
        "platform": "core"
      },
      {
        "name": "choice-action-basic",
        "category": "choices",
        "expected": {
          "valid": true
        },
        "actual": {
          "passages": 1,
          "error": "Choice missing target",
          "valid": false
        },
        "platform": "core"
      },
      {
        "name": "choice-action-multiple",
        "category": "choices",
        "expected": {
          "valid": true
        },
        "actual": {
          "passages": 1,
          "error": "Choice missing target",
          "valid": false
        },
        "platform": "core"
      },
      {
        "name": "choice-action-set-variable",
        "category": "choices",
        "expected": {
          "valid": true
        },
        "actual": {
          "passages": 1,
          "error": "Choice missing target",
          "valid": false
        },
        "platform": "core"
      },
      {
        "name": "choice-action-modify-variable",
        "category": "choices",
        "expected": {
          "valid": true
        },
        "actual": {
          "passages": 1,
          "error": "Choice missing target",
          "valid": false
        },
        "platform": "core"
      },
      {
        "name": "choice-action-order",
        "category": "choices",
        "expected": {
          "valid": true,
          "output_next": "Action executed."
        },
        "actual": {
          "passages": 2,
          "error": "Choice missing target",
          "valid": false
        },
        "platform": "core"
      },
      {
        "name": "choice-action-empty",
        "category": "choices",
        "expected": {
          "valid": true
        },
        "actual": {
          "passages": 1,
          "error": "Choice missing target",
          "valid": false
        },
        "platform": "core"
      },
      {
        "name": "choice-action-lua",
        "category": "choices",
        "expected": {
          "valid": true
        },
        "actual": {
          "passages": 1,
          "error": "Choice missing target",
          "valid": false
        },
        "platform": "core"
      },
      {
        "name": "alt-in-choice-text",
        "category": "alternatives",
        "expected": {
          "valid": true
        },
        "actual": {
          "passages": 1,
          "error": "Choice missing target",
          "valid": false
        },
        "platform": "core"
      }
    ],
    "formatHandling": [
      {
        "name": "format-json-minimal",
        "category": "formats",
        "expected": {
          "valid": true
        },
        "actual": {
          "valid": false,
          "error": "TypeError: Cannot read properties of undefined (reading 'length')"
        },
        "platform": "web"
      },
      {
        "name": "format-json-full",
        "category": "formats",
        "expected": {
          "valid": true
        },
        "actual": {
          "valid": false,
          "error": "TypeError: Cannot read properties of undefined (reading 'length')"
        },
        "platform": "web"
      },
      {
        "name": "format-json-choice-object",
        "category": "formats",
        "expected": {
          "valid": true
        },
        "actual": {
          "valid": false,
          "error": "TypeError: Cannot read properties of undefined (reading 'length')"
        },
        "platform": "web"
      },
      {
        "name": "format-json-variable-types",
        "category": "formats",
        "expected": {
          "valid": true
        },
        "actual": {
          "valid": false,
          "error": "TypeError: Cannot read properties of undefined (reading 'length')"
        },
        "platform": "web"
      }
    ],
    "errorMessages": [],
    "parserBugs": [
      {
        "name": "edge-empty-string",
        "category": "edge-cases",
        "expected": {
          "valid": true,
          "output": "Empty: \"\""
        },
        "actual": {
          "error": "Unterminated string",
          "valid": false
        },
        "platform": "core"
      },
      {
        "name": "syntax-comment-before-passage",
        "category": "syntax",
        "expected": {
          "valid": true
        },
        "actual": {
          "passages": 1,
          "valid": false,
          "error": "Expected passage marker (::) or directive (@)"
        },
        "platform": "web"
      },
      {
        "name": "edge-many-variables",
        "category": "edge-cases",
        "expected": {
          "valid": true
        },
        "actual": {
          "passages": 1,
          "valid": false,
          "error": "Expected passage marker (::) or directive (@)"
        },
        "platform": "web"
      },
      {
        "name": "edge-special-chars-content",
        "category": "edge-cases",
        "expected": {
          "valid": true
        },
        "actual": {
          "passages": 1,
          "valid": false,
          "error": "Unterminated string - reached end of file"
        },
        "platform": "web"
      }
    ],
    "testIssues": [
      {
        "name": "syntax-string-unterminated",
        "category": "syntax",
        "expected": {
          "error": "Unterminated string",
          "valid": false
        },
        "actual": {
          "passages": 1,
          "valid": true
        },
        "platform": "core"
      },
      {
        "name": "choice-missing-target",
        "category": "choices",
        "expected": {
          "valid": false,
          "error": "Missing target"
        },
        "actual": {
          "passages": 1,
          "valid": true,
          "error": null
        },
        "platform": "web"
      },
      {
        "name": "choice-action-invalid-syntax",
        "category": "choices",
        "expected": {
          "valid": false,
          "error": "Invalid action"
        },
        "actual": {
          "passages": 0,
          "valid": false,
          "error": "Unexpected token: }"
        },
        "platform": "web"
      }
    ]
  }
}