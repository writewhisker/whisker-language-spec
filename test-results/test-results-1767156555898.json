{
  "timestamp": "2025-12-31T04:49:15.874Z",
  "corpusVersion": "1.0",
  "platforms": [
    {
      "platform": "whisker-editor-web",
      "timestamp": "2025-12-31T04:49:15.897Z",
      "categories": [
        {
          "category": "syntax",
          "total": 50,
          "passed": 44,
          "failed": 6,
          "tests": [
            {
              "name": "syntax-passage-basic",
              "passed": true,
              "expected": {
                "passages": 1,
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 2
            },
            {
              "name": "syntax-passage-underscore",
              "passed": true,
              "expected": {
                "passages": 1,
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 1
            },
            {
              "name": "syntax-passage-numbers",
              "passed": true,
              "expected": {
                "passages": 1,
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-passage-multiple",
              "passed": true,
              "expected": {
                "passages": 3,
                "valid": true
              },
              "actual": {
                "passages": 3,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-passage-invalid-number-start",
              "passed": false,
              "expected": {
                "valid": false,
                "error": "Invalid passage name"
              },
              "actual": {
                "passages": 1,
                "valid": false,
                "error": "Expected passage name after ::"
              },
              "duration": 0
            },
            {
              "name": "syntax-passage-invalid-space",
              "passed": false,
              "expected": {
                "valid": false,
                "error": "Invalid passage name"
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-passage-invalid-hyphen",
              "passed": false,
              "expected": {
                "valid": false,
                "error": "Invalid passage name"
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-passage-duplicate",
              "passed": false,
              "expected": {
                "valid": false,
                "error": "Duplicate passage"
              },
              "actual": {
                "passages": 2,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-passage-case-sensitive",
              "passed": true,
              "expected": {
                "passages": 2,
                "valid": true
              },
              "actual": {
                "passages": 2,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-passage-long-name",
              "passed": true,
              "expected": {
                "passages": 1,
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 1
            },
            {
              "name": "syntax-comment-single-line",
              "passed": true,
              "expected": {
                "output": "Hello.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-comment-multi-line",
              "passed": true,
              "expected": {
                "output": "Hello.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-comment-inline",
              "passed": true,
              "expected": {
                "output": "You have 100 gold.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-comment-in-passage",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-comment-before-passage",
              "passed": false,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": false,
                "error": "Expected passage marker (::) or directive (@)"
              },
              "duration": 0
            },
            {
              "name": "syntax-comment-empty-single",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-comment-nested-invalid",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-comment-unterminated",
              "passed": true,
              "expected": {
                "valid": false,
                "error": "Unterminated comment"
              },
              "actual": {
                "passages": 1,
                "valid": false,
                "error": "Unterminated block comment"
              },
              "duration": 1
            },
            {
              "name": "syntax-number-integer",
              "passed": true,
              "expected": {
                "variables": {
                  "x": 42
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-number-float",
              "passed": true,
              "expected": {
                "variables": {
                  "x": 3.14159
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-number-negative",
              "passed": true,
              "expected": {
                "variables": {
                  "x": -42
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-number-zero",
              "passed": true,
              "expected": {
                "variables": {
                  "x": 0
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-string-basic",
              "passed": false,
              "expected": {
                "variables": {
                  "name": "Alice"
                },
                "output": "Hello, Alice!",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": false,
                "error": "Use \"not\" instead of ! for logical not"
              },
              "duration": 0
            },
            {
              "name": "syntax-string-empty",
              "passed": true,
              "expected": {
                "variables": {
                  "name": ""
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-string-escape-quote",
              "passed": true,
              "expected": {
                "variables": {
                  "text": "She said \"Hello\""
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-string-escape-newline",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-string-escape-backslash",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-boolean-true",
              "passed": true,
              "expected": {
                "variables": {
                  "flag": true
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 1
            },
            {
              "name": "syntax-boolean-false",
              "passed": true,
              "expected": {
                "variables": {
                  "flag": false
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-string-unterminated",
              "passed": true,
              "expected": {
                "valid": false,
                "error": "Unterminated string"
              },
              "actual": {
                "passages": 1,
                "valid": false,
                "error": "Unterminated string - newline in string literal"
              },
              "duration": 0
            },
            {
              "name": "syntax-operator-add",
              "passed": true,
              "expected": {
                "variables": {
                  "x": 8
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-operator-subtract",
              "passed": true,
              "expected": {
                "variables": {
                  "x": 6
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-operator-multiply",
              "passed": true,
              "expected": {
                "variables": {
                  "x": 42
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-operator-divide",
              "passed": true,
              "expected": {
                "variables": {
                  "x": 5
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-operator-modulo",
              "passed": true,
              "expected": {
                "variables": {
                  "x": 2
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-operator-and",
              "passed": true,
              "expected": {
                "variables": {
                  "x": false
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-operator-or",
              "passed": true,
              "expected": {
                "variables": {
                  "x": true
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-operator-not",
              "passed": true,
              "expected": {
                "variables": {
                  "x": false
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-operator-equal",
              "passed": true,
              "expected": {
                "variables": {
                  "x": true
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-operator-not-equal",
              "passed": true,
              "expected": {
                "variables": {
                  "x": true
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-operator-precedence",
              "passed": true,
              "expected": {
                "variables": {
                  "x": 14
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-operator-parentheses",
              "passed": true,
              "expected": {
                "variables": {
                  "x": 20
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-whitespace-indent",
              "passed": true,
              "expected": {
                "output": "  Indented text.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-whitespace-blank-lines",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 1
            },
            {
              "name": "syntax-whitespace-tabs",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-whitespace-trailing",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-whitespace-around-operators",
              "passed": true,
              "expected": {
                "variables": {
                  "x": 8
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-whitespace-passage-header",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-whitespace-only-line",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "syntax-whitespace-crlf",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            }
          ]
        },
        {
          "category": "variables",
          "total": 35,
          "passed": 27,
          "failed": 8,
          "tests": [
            {
              "name": "var-declare-implicit",
              "passed": true,
              "expected": {
                "variables": {
                  "gold": 100
                },
                "output": "You have 100 gold.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-declare-header",
              "passed": true,
              "expected": {
                "variables": {
                  "gold": 100,
                  "name": "Hero"
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 1
            },
            {
              "name": "var-declare-multiple",
              "passed": true,
              "expected": {
                "variables": {
                  "a": 1,
                  "b": 2,
                  "c": 3
                },
                "output": "Sum: 6",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-declare-reassign",
              "passed": true,
              "expected": {
                "variables": {
                  "x": 20
                },
                "output": "Value: 20",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-declare-invalid-name",
              "passed": false,
              "expected": {
                "valid": false,
                "error": "Invalid variable name"
              },
              "actual": {
                "passages": 1,
                "valid": false,
                "error": "Expected variable name after \"$\""
              },
              "duration": 0
            },
            {
              "name": "var-declare-reserved-prefix",
              "passed": false,
              "expected": {
                "valid": false,
                "error": "Reserved prefix"
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-undefined-access",
              "passed": false,
              "expected": {
                "valid": false,
                "error": "Undefined variable"
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-declare-order",
              "passed": false,
              "expected": {
                "valid": false,
                "error": "Undefined variable"
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-type-number-int",
              "passed": true,
              "expected": {
                "variables": {
                  "x": 42
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-type-number-float",
              "passed": true,
              "expected": {
                "variables": {
                  "x": 3.14
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-type-string",
              "passed": true,
              "expected": {
                "variables": {
                  "name": "Alice"
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-type-boolean-true",
              "passed": true,
              "expected": {
                "variables": {
                  "flag": true
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-type-boolean-false",
              "passed": true,
              "expected": {
                "variables": {
                  "flag": false
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-type-mismatch-add",
              "passed": false,
              "expected": {
                "valid": false,
                "error": "Type mismatch"
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 1
            },
            {
              "name": "var-type-concat",
              "passed": true,
              "expected": {
                "variables": {
                  "x": "Hello World"
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-type-number-precision",
              "passed": true,
              "expected": {
                "variables": {
                  "x": 0.3
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-type-large-number",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-scope-story",
              "passed": true,
              "expected": {
                "output_next": "Gold: 100",
                "valid": true
              },
              "actual": {
                "passages": 2,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-scope-temp-basic",
              "passed": true,
              "expected": {
                "output": "Temp: 50",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-scope-temp-cleared",
              "passed": false,
              "expected": {
                "valid": false,
                "error": "Undefined variable"
              },
              "actual": {
                "passages": 2,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-scope-shadow-invalid",
              "passed": false,
              "expected": {
                "valid": false,
                "error": "Shadows story variable"
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-scope-temp-same-name-different-passages",
              "passed": true,
              "expected": {
                "output_next": "Value: 20",
                "valid": true
              },
              "actual": {
                "passages": 2,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-scope-story-modify-from-passage",
              "passed": true,
              "expected": {
                "variables": {
                  "gold": 150
                },
                "valid": true
              },
              "actual": {
                "passages": 2,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-scope-temp-calculation",
              "passed": true,
              "expected": {
                "variables": {
                  "base": 100,
                  "final": 125
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-scope-temp-prefix-only",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-interp-simple",
              "passed": false,
              "expected": {
                "output": "Hello, Alice!",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": false,
                "error": "Use \"not\" instead of ! for logical not"
              },
              "duration": 0
            },
            {
              "name": "var-interp-number",
              "passed": true,
              "expected": {
                "output": "Count: 42",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 1
            },
            {
              "name": "var-interp-expression",
              "passed": true,
              "expected": {
                "output": "Sum: 15",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-interp-complex-expr",
              "passed": true,
              "expected": {
                "output": "Double: 200",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-interp-adjacent",
              "passed": true,
              "expected": {
                "output": "Name: JohnDoe",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-interp-escaped",
              "passed": true,
              "expected": {
                "output": "The price is $50.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-interp-in-string",
              "passed": true,
              "expected": {
                "variables": {
                  "greeting": "Hello, $name!"
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-interp-nested-braces",
              "passed": true,
              "expected": {
                "output": "Result: 16",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-interp-function-call",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "var-interp-boolean",
              "passed": true,
              "expected": {
                "output": "Flag: true",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            }
          ]
        },
        {
          "category": "conditionals",
          "total": 40,
          "passed": 35,
          "failed": 5,
          "tests": [
            {
              "name": "cond-block-true",
              "passed": true,
              "expected": {
                "output": "Shown.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-block-false",
              "passed": true,
              "expected": {
                "output": "After.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-block-else",
              "passed": true,
              "expected": {
                "output": "False branch.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 1
            },
            {
              "name": "cond-block-elif",
              "passed": true,
              "expected": {
                "output": "Two.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-block-elif-chain",
              "passed": true,
              "expected": {
                "output": "B",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-block-nested",
              "passed": true,
              "expected": {
                "output": "Both true.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-block-nested-deep",
              "passed": true,
              "expected": {
                "output": "All true.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-block-comparison-lt",
              "passed": true,
              "expected": {
                "output": "Less.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-block-comparison-gte",
              "passed": true,
              "expected": {
                "output": "GTE.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-block-logical-and",
              "passed": true,
              "expected": {
                "output": "Both.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-block-logical-or",
              "passed": true,
              "expected": {
                "output": "Either.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-block-logical-not",
              "passed": false,
              "expected": {
                "output": "Negated.",
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Expected \"|\" after \"!\""
              },
              "duration": 0
            },
            {
              "name": "cond-block-complex-expr",
              "passed": true,
              "expected": {
                "output": "Allowed.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-block-unclosed",
              "passed": false,
              "expected": {
                "valid": false,
                "error": "Unclosed conditional"
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 1
            },
            {
              "name": "cond-block-orphan-close",
              "passed": false,
              "expected": {
                "valid": false,
                "error": "Unexpected close"
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-inline-true",
              "passed": true,
              "expected": {
                "output": "The door is open.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-inline-false",
              "passed": true,
              "expected": {
                "output": "The door is closed.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-inline-comparison",
              "passed": true,
              "expected": {
                "output": "You have enough gold.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-inline-multiple",
              "passed": true,
              "expected": {
                "output": "Status: AY",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-inline-with-variable",
              "passed": true,
              "expected": {
                "output": "You have 1 item.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-inline-pluralize",
              "passed": true,
              "expected": {
                "output": "5 apples",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-inline-escaped-pipe",
              "passed": true,
              "expected": {
                "output": "Option A | more",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-inline-nested-invalid",
              "passed": false,
              "expected": {
                "valid": false,
                "error": "Nested inline conditional"
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-inline-missing-false",
              "passed": false,
              "expected": {
                "valid": false,
                "error": "Missing false option"
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-inline-empty-true",
              "passed": true,
              "expected": {
                "output": "Result: ",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 1
            },
            {
              "name": "cond-inline-empty-false",
              "passed": true,
              "expected": {
                "output": "Result: ",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-inline-in-choice",
              "passed": true,
              "expected": {
                "choice_text": "Unlock the door",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-truthy-number-zero",
              "passed": true,
              "expected": {
                "output": "Falsy.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-truthy-number-nonzero",
              "passed": true,
              "expected": {
                "output": "Truthy.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-truthy-string-empty",
              "passed": true,
              "expected": {
                "output": "Falsy.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-truthy-string-nonempty",
              "passed": true,
              "expected": {
                "output": "Truthy.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-truthy-boolean-true",
              "passed": true,
              "expected": {
                "output": "Truthy.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-truthy-boolean-false",
              "passed": true,
              "expected": {
                "output": "Falsy.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-truthy-negative",
              "passed": true,
              "expected": {
                "output": "Truthy.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-short-circuit-and",
              "passed": true,
              "expected": {
                "output": "Short-circuited.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-whitespace-preserve",
              "passed": true,
              "expected": {
                "output": "  Indented content.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-whitespace-blank-lines",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 1
            },
            {
              "name": "cond-whitespace-around-markers",
              "passed": true,
              "expected": {
                "output": "Content.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-whitespace-inline",
              "passed": true,
              "expected": {
                "output": "yes",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "cond-empty-block",
              "passed": true,
              "expected": {
                "output": "After.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            }
          ]
        },
        {
          "category": "choices",
          "total": 30,
          "passed": 21,
          "failed": 9,
          "tests": [
            {
              "name": "choice-basic",
              "passed": true,
              "expected": {
                "choices": 1,
                "valid": true
              },
              "actual": {
                "passages": 2,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "choice-multiple",
              "passed": true,
              "expected": {
                "choices": 3,
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "choice-once-only",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 2,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "choice-sticky",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 2,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "choice-missing-target",
              "passed": false,
              "expected": {
                "valid": false,
                "error": "Missing target"
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "choice-invalid-target",
              "passed": false,
              "expected": {
                "valid": false,
                "error": "Target passage does not exist"
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "choice-special-end",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "choice-special-back",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 2,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "choice-special-restart",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "choice-text-interpolation",
              "passed": true,
              "expected": {
                "choice_text": "Take the sword",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 1
            },
            {
              "name": "choice-condition-true",
              "passed": true,
              "expected": {
                "choices": 1,
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "choice-condition-false",
              "passed": true,
              "expected": {
                "choices": 1,
                "choice_text": "Leave",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "choice-condition-comparison",
              "passed": false,
              "expected": {
                "choices": 1,
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": false,
                "error": "Expected variable name after \"$\""
              },
              "duration": 0
            },
            {
              "name": "choice-condition-complex",
              "passed": true,
              "expected": {
                "choices": 1,
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "choice-condition-and-once",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "choice-all-hidden",
              "passed": true,
              "expected": {
                "choices": 0,
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "choice-condition-visit",
              "passed": false,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 2,
                "valid": false,
                "error": "Use \"not\" instead of ! for logical not"
              },
              "duration": 0
            },
            {
              "name": "choice-condition-invalid",
              "passed": false,
              "expected": {
                "valid": false,
                "error": "Invalid condition"
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: }"
              },
              "duration": 0
            },
            {
              "name": "choice-condition-sticky",
              "passed": false,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": false,
                "error": "Expected variable name after \"$\""
              },
              "duration": 0
            },
            {
              "name": "choice-condition-negation",
              "passed": true,
              "expected": {
                "choices": 1,
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "choice-action-basic",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "choice-action-multiple",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 1
            },
            {
              "name": "choice-action-set-variable",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "choice-action-modify-variable",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "choice-action-with-condition",
              "passed": false,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": false,
                "error": "Expected variable name after \"$\""
              },
              "duration": 0
            },
            {
              "name": "choice-action-order",
              "passed": true,
              "expected": {
                "output_next": "Action executed.",
                "valid": true
              },
              "actual": {
                "passages": 2,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "choice-action-invalid-syntax",
              "passed": false,
              "expected": {
                "valid": false,
                "error": "Invalid action"
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: }"
              },
              "duration": 0
            },
            {
              "name": "choice-action-empty",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "choice-action-lua",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "choice-full-syntax",
              "passed": false,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": false,
                "error": "Expected variable name after \"$\""
              },
              "duration": 0
            }
          ]
        },
        {
          "category": "alternatives",
          "total": 25,
          "passed": 20,
          "failed": 5,
          "tests": [
            {
              "name": "alt-sequence-basic",
              "passed": true,
              "expected": {
                "output_visit_1": "First",
                "output_visit_2": "Second",
                "output_visit_3": "Third",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "alt-sequence-stops",
              "passed": true,
              "expected": {
                "output_visit_4": "C",
                "output_visit_5": "C",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "alt-sequence-single",
              "passed": true,
              "expected": {
                "output": "Only option",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "alt-sequence-empty-option",
              "passed": true,
              "expected": {
                "output_visit_2": "",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "alt-sequence-multiword",
              "passed": true,
              "expected": {
                "output_visit_1": "Hello there",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "alt-sequence-with-variables",
              "passed": true,
              "expected": {
                "output_visit_1": "Hello Hero",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "alt-sequence-multiple-per-passage",
              "passed": true,
              "expected": {
                "output_visit_1": "A and X",
                "output_visit_2": "B and Y",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 1
            },
            {
              "name": "alt-cycle-basic",
              "passed": true,
              "expected": {
                "output_visit_1": "Red",
                "output_visit_2": "Green",
                "output_visit_3": "Blue",
                "output_visit_4": "Red",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "alt-cycle-two-options",
              "passed": true,
              "expected": {
                "output_visit_3": "Yes",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "alt-cycle-long",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "alt-cycle-with-text",
              "passed": true,
              "expected": {
                "output_visit_1": "The light is red.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "alt-cycle-independent",
              "passed": true,
              "expected": {
                "output_visit_1": "A X",
                "output_visit_2": "B Y",
                "output_visit_3": "A Z",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "alt-shuffle-basic",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "alt-shuffle-distribution",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "alt-shuffle-single",
              "passed": true,
              "expected": {
                "output": "only",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "alt-shuffle-in-sentence",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "alt-shuffle-multiple",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "alt-once-basic",
              "passed": false,
              "expected": {
                "output_visit_1": "First",
                "output_visit_2": "Second",
                "output_visit_3": "Third",
                "output_visit_4": "",
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Use \"not\" instead of ! for logical not"
              },
              "duration": 0
            },
            {
              "name": "alt-once-exhausted",
              "passed": false,
              "expected": {
                "output_visit_3": "Hint: ",
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Use \"not\" instead of ! for logical not"
              },
              "duration": 0
            },
            {
              "name": "alt-once-single",
              "passed": false,
              "expected": {
                "output_visit_1": "Only shown once",
                "output_visit_2": "",
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Use \"not\" instead of ! for logical not"
              },
              "duration": 0
            },
            {
              "name": "alt-once-in-sentence",
              "passed": false,
              "expected": {
                "output_visit_1": "(First visit)The room is quiet.",
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Use \"not\" instead of ! for logical not"
              },
              "duration": 0
            },
            {
              "name": "alt-once-with-sequence",
              "passed": false,
              "expected": {
                "output_visit_1": "New:  Welcome",
                "output_visit_2": " Hello",
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Use \"not\" instead of ! for logical not"
              },
              "duration": 0
            },
            {
              "name": "alt-empty-options",
              "passed": true,
              "expected": {
                "output": "",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "alt-escaped-pipe",
              "passed": true,
              "expected": {
                "output_visit_1": "A | B",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 1
            },
            {
              "name": "alt-in-choice-text",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            }
          ]
        },
        {
          "category": "api",
          "total": 25,
          "passed": 1,
          "failed": 24,
          "tests": [
            {
              "name": "api-state-get",
              "passed": false,
              "expected": {
                "output": "Value: 100",
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: {"
              },
              "duration": 0
            },
            {
              "name": "api-state-set",
              "passed": false,
              "expected": {
                "output": "Value: 200",
                "variables": {
                  "gold": 200
                },
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: {"
              },
              "duration": 0
            },
            {
              "name": "api-state-has-true",
              "passed": false,
              "expected": {
                "output": "Has gold: true",
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: {"
              },
              "duration": 0
            },
            {
              "name": "api-state-has-false",
              "passed": false,
              "expected": {
                "output": "Has gold: false",
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: {"
              },
              "duration": 0
            },
            {
              "name": "api-state-delete",
              "passed": false,
              "expected": {
                "output": "Has: false",
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: {"
              },
              "duration": 0
            },
            {
              "name": "api-state-all",
              "passed": false,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: {"
              },
              "duration": 0
            },
            {
              "name": "api-state-reset",
              "passed": false,
              "expected": {
                "output": "Has: false",
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: {"
              },
              "duration": 0
            },
            {
              "name": "api-state-get-nil",
              "passed": false,
              "expected": {
                "output": "Value: nil",
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: {"
              },
              "duration": 0
            },
            {
              "name": "api-passage-current",
              "passed": false,
              "expected": {
                "output": "Passage: Start",
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: {"
              },
              "duration": 0
            },
            {
              "name": "api-passage-get",
              "passed": false,
              "expected": {
                "variables": {
                  "found": true
                },
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: {"
              },
              "duration": 0
            },
            {
              "name": "api-passage-exists",
              "passed": false,
              "expected": {
                "output": "Exists: true\nMissing: false",
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: {"
              },
              "duration": 0
            },
            {
              "name": "api-passage-go",
              "passed": false,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: {"
              },
              "duration": 0
            },
            {
              "name": "api-passage-tags",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 3,
                "valid": true,
                "error": null
              },
              "duration": 1
            },
            {
              "name": "api-history-back",
              "passed": false,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: {"
              },
              "duration": 0
            },
            {
              "name": "api-history-canBack",
              "passed": false,
              "expected": {
                "output": "Can go back: false",
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: {"
              },
              "duration": 0
            },
            {
              "name": "api-history-count",
              "passed": false,
              "expected": {
                "output_next": "History: 1",
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: {"
              },
              "duration": 0
            },
            {
              "name": "api-history-contains",
              "passed": false,
              "expected": {
                "output_next": "Was at Start: true",
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: {"
              },
              "duration": 0
            },
            {
              "name": "api-visited-current",
              "passed": false,
              "expected": {
                "output_visit_1": "Visits: 1",
                "output_visit_2": "Visits: 2",
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: {"
              },
              "duration": 0
            },
            {
              "name": "api-visited-other",
              "passed": false,
              "expected": {
                "output_other": "Start visits: 1",
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: {"
              },
              "duration": 0
            },
            {
              "name": "api-random",
              "passed": false,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: {"
              },
              "duration": 0
            },
            {
              "name": "api-pick",
              "passed": false,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: {"
              },
              "duration": 0
            },
            {
              "name": "api-print",
              "passed": false,
              "expected": {
                "output": "Content.",
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: {"
              },
              "duration": 0
            },
            {
              "name": "api-lua-inline",
              "passed": false,
              "expected": {
                "variables": {
                  "x": 8
                },
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: {"
              },
              "duration": 0
            },
            {
              "name": "api-lua-block",
              "passed": false,
              "expected": {
                "output": "Sum: 30",
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: {"
              },
              "duration": 0
            },
            {
              "name": "api-lua-stdlib",
              "passed": false,
              "expected": {
                "output": "Upper: HELLO\nFloor: 3",
                "valid": true
              },
              "actual": {
                "passages": 0,
                "valid": false,
                "error": "Unexpected token: {"
              },
              "duration": 0
            }
          ]
        },
        {
          "category": "formats",
          "total": 15,
          "passed": 6,
          "failed": 9,
          "tests": [
            {
              "name": "format-text-minimal",
              "passed": true,
              "expected": {
                "passages": 1,
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "format-text-header",
              "passed": true,
              "expected": {
                "metadata": {
                  "title": "Test Story",
                  "author": "Test Author",
                  "version": "1.0.0"
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 1
            },
            {
              "name": "format-text-vars-block",
              "passed": true,
              "expected": {
                "variables": {
                  "gold": 100,
                  "name": "Hero",
                  "active": true
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "format-text-passage-directives",
              "passed": true,
              "expected": {
                "passage_tags": [
                  "chapter1",
                  "intro"
                ],
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "format-text-lifecycle-scripts",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "format-text-utf8",
              "passed": false,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": false,
                "error": "Unexpected character: "
              },
              "duration": 0
            },
            {
              "name": "format-text-start-directive",
              "passed": true,
              "expected": {
                "start_passage": "Intro",
                "valid": true
              },
              "actual": {
                "passages": 2,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "format-text-empty-file",
              "passed": false,
              "expected": {
                "valid": false,
                "error": "No passages"
              },
              "actual": {
                "passages": 0,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "format-json-minimal",
              "passed": false,
              "expected": {
                "valid": true
              },
              "actual": {
                "valid": false,
                "error": "TypeError: Cannot read properties of undefined (reading 'length')"
              },
              "error": "TypeError: Cannot read properties of undefined (reading 'length')",
              "duration": 0
            },
            {
              "name": "format-json-full",
              "passed": false,
              "expected": {
                "valid": true
              },
              "actual": {
                "valid": false,
                "error": "TypeError: Cannot read properties of undefined (reading 'length')"
              },
              "error": "TypeError: Cannot read properties of undefined (reading 'length')",
              "duration": 0
            },
            {
              "name": "format-json-missing-format",
              "passed": false,
              "expected": {
                "valid": false,
                "error": "Missing required field: format"
              },
              "actual": {
                "valid": false,
                "error": "TypeError: Cannot read properties of undefined (reading 'length')"
              },
              "error": "TypeError: Cannot read properties of undefined (reading 'length')",
              "duration": 0
            },
            {
              "name": "format-json-invalid-format",
              "passed": false,
              "expected": {
                "valid": false,
                "error": "Invalid format"
              },
              "actual": {
                "valid": false,
                "error": "TypeError: Cannot read properties of undefined (reading 'length')"
              },
              "error": "TypeError: Cannot read properties of undefined (reading 'length')",
              "duration": 0
            },
            {
              "name": "format-json-choice-object",
              "passed": false,
              "expected": {
                "valid": true
              },
              "actual": {
                "valid": false,
                "error": "TypeError: Cannot read properties of undefined (reading 'length')"
              },
              "error": "TypeError: Cannot read properties of undefined (reading 'length')",
              "duration": 0
            },
            {
              "name": "format-json-variable-types",
              "passed": false,
              "expected": {
                "valid": true
              },
              "actual": {
                "valid": false,
                "error": "TypeError: Cannot read properties of undefined (reading 'length')"
              },
              "error": "TypeError: Cannot read properties of undefined (reading 'length')",
              "duration": 0
            },
            {
              "name": "format-json-type-mismatch",
              "passed": false,
              "expected": {
                "valid": false,
                "error": "Type mismatch"
              },
              "actual": {
                "valid": false,
                "error": "TypeError: Cannot read properties of undefined (reading 'length')"
              },
              "error": "TypeError: Cannot read properties of undefined (reading 'length')",
              "duration": 0
            }
          ]
        },
        {
          "category": "edge-cases",
          "total": 30,
          "passed": 26,
          "failed": 4,
          "tests": [
            {
              "name": "edge-empty-passage",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 2,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "edge-no-choices",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "edge-many-passages",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 2,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "edge-long-content",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 1
            },
            {
              "name": "edge-deep-nesting",
              "passed": true,
              "expected": {
                "output": "Ten levels deep.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "edge-many-choices",
              "passed": true,
              "expected": {
                "choices": 20,
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "edge-many-variables",
              "passed": false,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": false,
                "error": "Expected passage marker (::) or directive (@)"
              },
              "duration": 0
            },
            {
              "name": "edge-long-variable-name",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "edge-long-passage-name",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "edge-unicode-identifiers",
              "passed": true,
              "expected": {
                "output": "",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "edge-special-chars-content",
              "passed": false,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": false,
                "error": "Unterminated string - reached end of file"
              },
              "duration": 0
            },
            {
              "name": "edge-escaped-dollar",
              "passed": true,
              "expected": {
                "output": "Price: $100",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "edge-escaped-braces",
              "passed": true,
              "expected": {
                "output": "Code: { and }",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "edge-escaped-backslash",
              "passed": true,
              "expected": {
                "output": "Path: C:\\folder\\file",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "edge-empty-string",
              "passed": true,
              "expected": {
                "output": "Empty: \"\"",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "edge-string-with-quotes",
              "passed": true,
              "expected": {
                "output": "He said \"Hello\"",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 1
            },
            {
              "name": "edge-newline-in-string",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "edge-tab-in-string",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "edge-number-zero",
              "passed": true,
              "expected": {
                "output": "Falsy.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "edge-number-negative",
              "passed": true,
              "expected": {
                "output": "Value: -42",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "edge-number-decimal",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "edge-division-result",
              "passed": true,
              "expected": {
                "variables": {
                  "x": 2.5
                },
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "edge-division-by-zero",
              "passed": false,
              "expected": {
                "valid": false,
                "error": "Division by zero"
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "edge-modulo-zero",
              "passed": false,
              "expected": {
                "valid": false,
                "error": "Modulo by zero"
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "edge-self-reference",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "edge-circular-reference",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 2,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "edge-exhausted-choices",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "edge-choice-self-target",
              "passed": true,
              "expected": {
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "edge-empty-condition",
              "passed": true,
              "expected": {
                "output": "After.",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            },
            {
              "name": "edge-alternative-single-visit",
              "passed": true,
              "expected": {
                "output": "Only",
                "valid": true
              },
              "actual": {
                "passages": 1,
                "valid": true,
                "error": null
              },
              "duration": 0
            }
          ]
        }
      ],
      "summary": {
        "total": 250,
        "passed": 180,
        "failed": 70,
        "passRate": "72.0%"
      }
    }
  ]
}